<App Icon="FOLDER" Category="5" Type="SUBMENU">
  <Name>
    <String str="File Explorer" />
    <String str="Explorateur de fichiers" />
    <String str="Explorador de Archivos" />
    <String str="Datei-Explorer" />
    <String str="Esplora file" />
    <String str="Bestandsverkenner" />
    <String str="Explorador de arquivos" />
  </Name>
  <Init>
    <![CDATA[
			function SetMCdescriptions(SubMenu) {
				for (let j = 0; j < SubMenu.Items.length; j++)	{
					MainMutex.unlock();
          if (!SubMenu.Items[j].Name.includes("Memory Card ")) { MainMutex.lock(); continue; }
          let mcSlot = SubMenu.Items[j].Name === "Memory Card 1" ? 0 : 1;
					let mcInfo = System.getMCInfo(mcSlot);
					let used = 8000 - mcInfo.freemem;
					SubMenu.Items[j].Description = `${used} / 8000 Kb`;
					MainMutex.lock();
				}
			}
    ]]>
  </Init>
  <Options Type="Explorer"/>
  <Context Name="FileContext" Type="OptionContext" Filter="SubDeviceOnly">
		<Component Name="{DELETE}" Icon="-1">
			<Confirm>
				<![CDATA[
					function(index, item) { DashUISetDialog(item.Dialog); }
				]]>
			</Confirm>
			<Dialog Icon="-1" Title="" BG="false" Type="CONFIRMATION" BackBtn="true" ConfirmBtn="true">
				<Text>
					<String str="Do you want to delete the selected item?" />
					<String str="Do you want to delete the selected item?" />
					<String str="Â¿Seguro que deseas eliminar el objeto seleccionado?" />
					<String str="Do you want to delete the selected item?" />
					<String str="Do you want to delete the selected item?" />
					<String str="Do you want to delete the selected item?" />
					<String str="Do you want to delete the selected item?" />
				</Text>
				<Dialog Name="DeleteItemDialogTask" Icon="-1" Title="" BG="false" Type="TEXT" Text="{WAIT}">
					<Task>
						<![CDATA[
							function() {
								const collection = DashUI.SubMenu.ItemCollection[DashUI.SubMenu.Level].Items;
                deleteItem(collection, DashUI.SubMenu.Items.Current);
								if (collection.length < 1) { DashUI.SubMenu.Items.Current = -1; }
								else if (DashUI.SubMenu.Items.Current >= collection.length) { DashUI.SubMenu.Items.Current = collection.length - 1; }
								UIAnimationDialogFade_Start(false);
							}
						]]>
					</Task>
				</Dialog>
				<Event On="Confirm" Type="Transition" To="DeleteItemDialogTask" Condition="DashUI.Dialog.Data[DashUI.Dialog.Level].Selected === 0" Exit="true"/>
			</Dialog>
		</Component>
    <Component Name="{INFO}" Icon="-1">
      <Confirm>
        <![CDATA[
        function(index, item) {
					DashUISetDialog(item.Dialog);
				}
      ]]>
      </Confirm>
      <Dialog Icon="-1" Title="" BG="false" Type="INFO" ElementIcon="true" BackBtn="true" >
        <Info>
          <Item Name="{TITLE}" Value="{DashUI.SubMenu.ItemCollection[DashUI.SubMenu.Level].Items[DashUI.SubMenu.Items.Current].Name}" Selectable="false" />
          <Item Name="{DEVICE}" Value="{DashUI.SubMenu.ItemCollection[DashUI.SubMenu.Level].Items[DashUI.SubMenu.Items.Current].Device}" Selectable="false" />
          <Item Name="{SIZE}" Value="{DashUI.SubMenu.ItemCollection[DashUI.SubMenu.Level].Items[DashUI.SubMenu.Items.Current].Description || '0 bytes'}" Selectable="false" />
        </Info>
      </Dialog>
    </Component>
  </Context>
</App>
